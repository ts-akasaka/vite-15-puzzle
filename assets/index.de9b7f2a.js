var W=Object.defineProperty,R=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var x=(e,t,n)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))z.call(t,n)&&x(e,n,t[n]);if(b)for(var n of b(t))_.call(t,n)&&x(e,n,t[n]);return e},E=(e,t)=>R(e,L(t));var F=(e,t,n)=>(x(e,typeof t!="symbol"?t+"":t,n),n);import{j as B,r as i,E as T,m as f,D as v,c as u,a as J,T as N,b as K,B as y,d as U,e as V,f as q,g as H,p as C,P as G,C as Q,h as X,i as Y,R as Z,k as ee,l as te,n as ne}from"./vendor.fabf2e23.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};re();const a=B.exports.jsx,m=B.exports.jsxs;class oe extends i.exports.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1})}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Uncaught error:",t,n)}render(){const{children:t}=this.props;return this.state.hasError?a("h1",{children:"\u30A8\u30E9\u30FC\u306E\u767A\u751F\u306F\u60F3\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093\uFF01"}):t}}const se=e=>{if(e.length!==16)throw new Error("Illegal board status!");return e.every((t,n)=>n<15&&t===n+1||n===15&&t===null)},k=e=>[e-4>=0?e-4:null,e+4<=15?e+4:null,e%4-1>=0?e-1:null,e%4+1<=3?e+1:null].filter(t=>typeof t=="number"),P=(e,t)=>{var n;return(n=k(t).find(o=>o!==null&&e[o]===null))!=null?n:null},ae=e=>{var t;return(t=e.indexOf(null))!=null?t:null},D=(e,t,n)=>{const o=[...e];return t in e&&n in e&&t!==n&&([o[t],o[n]]=[o[n],o[t]]),o},ie=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,null],I=(e=100)=>{var n;let t=[...ie];for(let o=0;o<e;o++){const r=(n=ae(t))!=null?n:-1,s=k(r),c=s[Math.floor(Math.random()*s.length)];t=D(t,r,c)}return t},ce={board:I(),shuffling:!1},le=(e="default")=>{const t=JSON.parse(JSON.stringify(ce)),n=new T,o={root:t,emitter:n,dispatch:r=>{o.root=r(o.root),n.emit("update")}};return o},A=i.exports.createContext(null),S=()=>{const e=i.exports.useContext(A);if(!e)throw new Error("No StoreContext provided.");return e},ue=(e,t)=>{const n=S(),[o,r]=i.exports.useState(()=>e(n.root)),s=i.exports.useCallback(()=>{const c=e(n.root);(t?t(o,c):o!==c)&&r(c)},[]);return i.exports.useEffect(()=>(n.emitter.on("update",s),()=>{n.emitter.off("update",s)}),[]),o},de=({children:e})=>{const t=i.exports.useRef(le()).current;return a(A.Provider,{value:t,children:e})},p=e=>e,fe={error:{icon:U,iconStyle:p("errorIcon")},warning:{icon:V,iconStyle:p("warningIcon")},info:{icon:q,iconStyle:p("infoIcon")},success:{icon:H,iconStyle:p("successIcon")}},me=f(e=>({root:{},content:{padding:"1.5rem 1.5rem 0rem 1.5rem",minHeight:"6rem",display:"flex",alignItems:"center"},actions:{padding:"0.5rem 1.5rem 1rem 1.5rem",justifyContent:"center","& > .MuiButton-root":{minWidth:"8rem"}},icon:{flex:"0 0 auto",width:"3rem",height:"3rem"},message:{flex:"1 1",fontSize:"1rem",paddingLeft:"1.5rem",whiteSpace:"pre-wrap"},errorIcon:{color:e.palette.error.main},warningIcon:{color:e.palette.warning.main},infoIcon:{color:e.palette.info.main},successIcon:{color:e.palette.success.main}})),he=({iconType:e,message:t,onClose:n,okButtonText:o})=>{const r=me(),{icon:s,iconStyle:c}=fe[e!=null?e:"info"];return m(v,{className:u("MessageDialog",r.root),open:!0,maxWidth:"sm",fullWidth:!0,onClose:void 0,children:[m(J,{className:r.content,children:[a(s,{className:u(r.icon,r[c])}),a(N,{className:u(r.message),children:t})]}),a(K,{className:r.actions,children:a(y,{ref:l=>l==null?void 0:l.focus(),variant:"outlined",onClick:n,children:o!=null?o:"OK"})})]})},pe=f(e=>({root:{opacity:0}})),ge=({onClose:e,showWhile:t})=>{const n=pe();return i.exports.useEffect(()=>{t().then(e)},[]),a(v,{className:u("TransparentBlocker",n.root),open:!0,fullScreen:!0})},xe={message:he,blocker:ge},O=i.exports.createContext(null),$=()=>{const e=i.exports.useContext(O);if(!e)throw new Error("No DialogContext provided.");return e},ye=(e,t,n)=>o=>{const r=new Date().getTime().toString(16)+"-"+t.length;return new Promise((s,c)=>{const l=a(e,E(w({},o),{onClose:(...g)=>{const d=t.indexOf(l);d>=0?(t.splice(d,1),n(),s(g)):c("Illegal dialog close.")}}),r);t.push(l),n()})},Ce=({children:e})=>{const t=i.exports.useRef([]).current,[,n]=i.exports.useReducer(()=>[],[]),[o]=i.exports.useState(()=>Object.fromEntries(Object.entries(xe).map(([r,s])=>[r,ye(s,t,n)])));return m(O.Provider,{value:o,children:[e,t.map(r=>r)]})},Se=(e,t)=>C(n=>{n.board=D(n.board,e,t)}),be=()=>C(e=>{e.board=I()}),we=f(e=>({root:{height:"calc(25% - 2px)",width:"calc(25% - 2px)",border:({n:t})=>t===null?"0px":"1px solid grey",margin:"1px",fontSize:"2em",fontWeight:"bold",backgroundColor:t=>t.n!==null?"white":"#ffffff00","&:hover":{backgroundColor:"green",color:"#FFF"}},right:{animation:"$rightAnimation 1s ease"},"@keyframes rightAnimation":{"0%":{transform:"translate(-100%, 0%)"},"100%":{transform:"translate(0%, 0%)"}},left:{animation:"$leftAnimation 1s ease"},"@keyframes leftAnimation":{"0%":{transform:"translate(100%, 0%)"},"100%":{transform:"translate(0%, 0%)"}},down:{animation:"$downAnimation 1s ease"},"@keyframes downAnimation":{"0%":{transform:"translate(0%, -100%)"},"100%":{transform:"translate(0%, 0%)"}},up:{animation:"$upAnimation 1s ease"},"@keyframes upAnimation":{"0%":{transform:"translate(0%, 100%)"},"100%":{transform:"translate(0%, 0%)"}}})),Ee=e=>{var d;const{n:t,pos:n}=e,o=we(e),r=S(),s=$(),[c,l]=i.exports.useState(n);i.exports.useEffect(()=>{(async()=>{r.root.shuffling?l(n):n!==c&&(await s.blocker({showWhile:async()=>{await new Promise(h=>setTimeout(h,1e3))}}),l(n))})()},[n]);const g=i.exports.useCallback(async()=>{const h=P(r.root.board,n);h!==null&&(r.dispatch(Se(n,h)),se(r.root.board)&&(await new Promise(M=>setTimeout(M,1e3)),await s.message({message:"\uFF11\uFF5E\uFF11\uFF15\u306E\u6570\u304C\u63C3\u3044\u307E\u3057\u305F\uFF01"})))},[n]);return a(y,{className:u("SlideButton",o.root,r.root.shuffling?null:(d={[-4]:o.up,[1]:o.right,[4]:o.down,[-1]:o.left}[n-c])!=null?d:null),onClick:g,disabled:t===null||P(r.root.board,n)===null,children:t})},Fe=f(e=>({root:{boxSizing:"content-box",padding:0,height:"24rem",width:"24rem",display:"flex",flexWrap:"wrap",border:"4px solid lightgrey",backgroundColor:"grey",backgroundImage:"repeating-linear-gradient(-45deg,#fff, #fff 7px,transparent 0, transparent 14px)"}})),Be=()=>{const e=Fe(),t=ue(n=>n.board);return a(G,{className:u("BoardPanel",e.root),children:t.map((n,o)=>a(Ee,{n,pos:o},n!=null?n:0))})},j=e=>C(t=>{t.shuffling=e}),ve=f(e=>({button:{fontWeight:"bold",marginTop:"2rem"}}));function Ne(){const e=ve(),t=$(),{dispatch:n}=S(),o=i.exports.useCallback(async()=>{n(j(!0)),n(be()),await t.message({iconType:"info",message:"\u30B7\u30E3\u30C3\u30D5\u30EB\u3057\u307E\u3057\u305F"}),n(j(!1))},[]);return a(Q,{maxWidth:"sm",children:m(X,{sx:{my:4},children:[a(N,{variant:"h4",component:"h1",gutterBottom:!0,children:"\uFF11\uFF15\u30D1\u30BA\u30EB\u30B5\u30F3\u30D7\u30EB"}),a(Be,{}),a(y,{className:u("ShuffleButton",e.button),variant:"contained",size:"large",color:"primary",onClick:o,children:"\u30B7\u30E3\u30C3\u30D5\u30EB"})]})})}const ke=Y({});Z.render(a(ee.StrictMode,{children:m(te,{theme:ke,children:[a(ne,{}),a(oe,{children:a(de,{children:a(Ce,{children:a(Ne,{})})})})]})}),document.getElementById("root"));
