var W=Object.defineProperty,R=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var g=(t,e,n)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||(e={}))M.call(e,n)&&g(t,n,e[n]);if(b)for(var n of b(e))z.call(e,n)&&g(t,n,e[n]);return t},E=(t,e)=>R(t,L(e));var F=(t,e,n)=>(g(t,typeof e!="symbol"?e+"":e,n),n);import{j as v,r as i,E as _,m as d,D as B,a as T,c as x,T as k,b as J,B as y,d as K,e as U,f as V,g as X,p as C,P as q,C as H,h as G,i as Q,R as Y,k as Z,l as ee,n as te}from"./vendor.fabf2e23.js";const ne=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};ne();const a=v.exports.jsx,f=v.exports.jsxs;class re extends i.exports.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1})}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){const{children:e}=this.props;return this.state.hasError?a("h1",{children:"\u30A8\u30E9\u30FC\u306E\u767A\u751F\u306F\u60F3\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093\uFF01"}):e}}const oe=t=>{if(t.length!==16)throw new Error("Illegal board status!");return t.every((e,n)=>n<15&&e===n+1||n===15&&e===null)},I=(t,e)=>{var n;return(n=[e-4>=0?e-4:null,e+4<=15?e+4:null,e%4-1>=0?e-1:null,e%4+1<=3?e+1:null].find(o=>o!==null&&t[o]===null))!=null?n:null},se=t=>{var e;return(e=t.indexOf(null))!=null?e:null},N=(t,e,n)=>{const o=[...t];return e in t&&n in t&&e!==n&&([o[e],o[n]]=[o[n],o[e]]),o},ae=100,ie=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,null],D=()=>{var e,n;let t=[...ie];for(let o=0;o<ae;o++){const r=(e=se(t))!=null?e:-1,s=(n=[r-4,r+1,r+4,r-1].filter(c=>c in t).sort(()=>Math.random()>=.5?-1:1)[0])!=null?n:-1;t=N(t,r,s)}return t},ce={board:D(),shuffling:!1},le=()=>{const t=JSON.parse(JSON.stringify(ce)),e=new _,n={root:t,emitter:e,dispatch:o=>{n.root=o(n.root),e.emit("update")}};return n},P=i.exports.createContext(null),S=()=>{const t=i.exports.useContext(P);if(!t)throw new Error("No StoreContext provided.");return t},ue=(t,e)=>{const n=S(),[o,r]=i.exports.useState(()=>t(n.root)),s=i.exports.useCallback(()=>{const c=t(n.root);(e?e(o,c):o!==c)&&r(c)},[]);return i.exports.useEffect(()=>(n.emitter.on("update",s),()=>{n.emitter.off("update",s)}),[]),o},de=({children:t})=>{const e=i.exports.useRef(le()).current;return a(P.Provider,{value:e,children:t})},h=t=>t,fe={error:{icon:K,iconStyle:h("errorIcon")},warning:{icon:U,iconStyle:h("warningIcon")},info:{icon:V,iconStyle:h("infoIcon")},success:{icon:X,iconStyle:h("successIcon")}},me=d(t=>({content:{padding:"1.5rem 1.5rem 0rem 1.5rem",minHeight:"6rem",display:"flex",alignItems:"center"},actions:{padding:"0.5rem 1.5rem 1rem 1.5rem",justifyContent:"center","& > .MuiButton-root":{minWidth:"8rem"}},icon:{flex:"0 0 auto",width:"3rem",height:"3rem"},message:{flex:"1 1",fontSize:"1rem",paddingLeft:"1.5rem",whiteSpace:"pre-wrap"},errorIcon:{color:t.palette.error.main},warningIcon:{color:t.palette.warning.main},infoIcon:{color:t.palette.info.main},successIcon:{color:t.palette.success.main}})),he=({iconType:t,message:e,onClose:n,okButtonText:o})=>{const r=me(),{icon:s,iconStyle:c}=fe[t!=null?t:"info"];return f(B,{open:!0,maxWidth:"sm",fullWidth:!0,onClose:void 0,children:[f(T,{className:r.content,children:[a(s,{className:x(r.icon,r[c])}),a(k,{className:x(r.message),children:e})]}),a(J,{className:r.actions,children:a(y,{ref:l=>l==null?void 0:l.focus(),variant:"outlined",onClick:n,children:o!=null?o:"OK"})})]})},pe=d(t=>({root:{opacity:0}})),ge=({onClose:t,showWhile:e})=>{const n=pe();return i.exports.useEffect(()=>{e().then(t)},[]),a(B,{className:n.root,open:!0,fullScreen:!0})},xe={message:he,blocker:ge},A=i.exports.createContext(null),O=()=>{const t=i.exports.useContext(A);if(!t)throw new Error("No DialogContext provided.");return t},ye=(t,e,n)=>o=>{const r=new Date().getTime().toString(16)+"-"+e.length;return new Promise((s,c)=>{const l=a(t,E(w({},o),{onClose:(...p)=>{const u=e.indexOf(l);u>=0?(e.splice(u,1),n(),s(p)):c("Illegal dialog close.")}}),r);e.push(l),n()})},Ce=({children:t})=>{const e=i.exports.useRef([]).current,[,n]=i.exports.useReducer(()=>[],[]),[o]=i.exports.useState(()=>Object.fromEntries(Object.entries(xe).map(([r,s])=>[r,ye(s,e,n)])));return f(A.Provider,{value:o,children:[t,e.map(r=>r)]})},Se=(t,e)=>C(n=>{n.board=N(n.board,t,e)}),be=()=>C(t=>{t.board=D()}),we=d(t=>({root:{height:"calc(25% - 2px)",width:"calc(25% - 2px)",border:({n:e})=>e===null?"0px":"1px solid grey",margin:"1px",fontSize:"2em",fontWeight:"bold",backgroundColor:e=>e.n!==null?"white":"#ffffff00","&:hover":{backgroundColor:"green",color:"#FFF"}},right:{animation:"$rightAnimation 1s ease"},"@keyframes rightAnimation":{"0%":{transform:"translate(-100%, 0%)"},"100%":{transform:"translate(0%, 0%)"}},left:{animation:"$leftAnimation 1s ease"},"@keyframes leftAnimation":{"0%":{transform:"translate(100%, 0%)"},"100%":{transform:"translate(0%, 0%)"}},down:{animation:"$downAnimation 1s ease"},"@keyframes downAnimation":{"0%":{transform:"translate(0%, -100%)"},"100%":{transform:"translate(0%, 0%)"}},up:{animation:"$upAnimation 1s ease"},"@keyframes upAnimation":{"0%":{transform:"translate(0%, 100%)"},"100%":{transform:"translate(0%, 0%)"}}})),Ee=t=>{var u;const{n:e,pos:n}=t,o=we(t),r=S(),s=O(),[c,l]=i.exports.useState(n);i.exports.useEffect(()=>{(async()=>{r.root.shuffling?l(n):n!==c&&(await s.blocker({showWhile:async()=>{await new Promise(m=>setTimeout(m,1e3))}}),l(n))})()},[n]);const p=i.exports.useCallback(async()=>{const m=I(r.root.board,n);m!==null&&(r.dispatch(Se(n,m)),oe(r.root.board)&&(await new Promise(j=>setTimeout(j,1e3)),await s.message({message:"\uFF11\uFF5E\uFF11\uFF15\u306E\u6570\u304C\u63C3\u3044\u307E\u3057\u305F\uFF01"})))},[n]);return a(y,{className:x(o.root,r.root.shuffling?null:(u={[-4]:o.up,[1]:o.right,[4]:o.down,[-1]:o.left}[n-c])!=null?u:null),onClick:p,disabled:e===null||I(r.root.board,n)===null,children:e})},Fe=d(t=>({root:{boxSizing:"content-box",padding:0,height:"24rem",width:"24rem",display:"flex",flexWrap:"wrap",border:"4px solid lightgrey",backgroundColor:"grey",backgroundImage:"repeating-linear-gradient(-45deg,#fff, #fff 7px,transparent 0, transparent 14px)"}})),ve=()=>{const t=Fe(),e=ue(n=>n.board);return a(q,{className:t.root,children:e.map((n,o)=>a(Ee,{n,pos:o},n!=null?n:0))})},$=t=>C(e=>{e.shuffling=t}),Be=d(t=>({button:{fontWeight:"bold",marginTop:"2rem"}}));function ke(){const t=Be(),e=O(),{dispatch:n}=S(),o=i.exports.useCallback(async()=>{n($(!0)),n(be()),await e.message({iconType:"info",message:"\u30B7\u30E3\u30C3\u30D5\u30EB\u3057\u307E\u3057\u305F"}),n($(!1))},[]);return a(H,{maxWidth:"sm",children:f(G,{sx:{my:4},children:[a(k,{variant:"h4",component:"h1",gutterBottom:!0,children:"\uFF11\uFF15\u30D1\u30BA\u30EB\u30B5\u30F3\u30D7\u30EB"}),a(ve,{}),a(y,{className:`X ${t.button} X `,variant:"contained",size:"large",color:"primary",onClick:o,children:"\u30B7\u30E3\u30C3\u30D5\u30EB"})]})})}const Ie=Q({});Y.render(a(Z.StrictMode,{children:f(ee,{theme:Ie,children:[a(te,{}),a(re,{children:a(de,{children:a(Ce,{children:a(ke,{})})})})]})}),document.getElementById("root"));
