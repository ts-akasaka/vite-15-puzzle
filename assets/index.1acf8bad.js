var W=Object.defineProperty,R=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var g=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&g(e,r,t[r]);if(S)for(var r of S(t))_.call(t,r)&&g(e,r,t[r]);return e},E=(e,t)=>R(e,L(t));var F=(e,t,r)=>(g(e,typeof t!="symbol"?t+"":t,r),r);import{j as B,r as i,m as d,D as v,c as u,a as T,T as k,b as K,B as x,d as V,e as q,f as H,g as U,v as G,p as y,P as J,C as Q,h as X,i as Y,R as Z,k as ee,l as te,n as re}from"./vendor.f86a932c.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}};ne();const a=B.exports.jsx,f=B.exports.jsxs;class oe extends i.exports.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1})}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){const{children:t}=this.props;return this.state.hasError?a("h1",{children:"\u30A8\u30E9\u30FC\u306E\u767A\u751F\u306F\u60F3\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093\uFF01"}):t}}const se=e=>{if(e.length!==16)throw new Error("Illegal board status!");return e.every((t,r)=>r<15&&t===r+1||r===15&&t===null)},P=e=>[e-4>=0?e-4:null,e+4<=15?e+4:null,e%4-1>=0?e-1:null,e%4+1<=3?e+1:null].filter(t=>typeof t=="number"),I=(e,t)=>{var r;return(r=P(t).find(n=>n!==null&&e[n]===null))!=null?r:null},ae=e=>{var t;return(t=e.indexOf(null))!=null?t:null},N=(e,t,r)=>{const n=[...e];return t in e&&r in e&&t!==r&&([n[t],n[r]]=[n[r],n[t]]),n},ie=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,null],D=(e=100)=>{var r;let t=[...ie];for(let n=0;n<e;n++){const o=(r=ae(t))!=null?r:-1,s=P(o),c=s[Math.floor(Math.random()*s.length)];t=N(t,o,c)}return t},ce=e=>t=>(e.push(t),()=>{e.splice(e.indexOf(t),1)}),le=e=>t=>{e.splice(e.indexOf(t),e.includes(t)?1:0)},ue=(e="default")=>{const t={board:D(),shuffling:!1},r=[],n={root:t,dispatch:o=>{n.root=o(n.root),r.forEach(s=>s())},subscribe:ce(r),unsubscribe:le(r)};return n},A=i.exports.createContext(null),b=()=>{const e=i.exports.useContext(A);if(!e)throw new Error("No StoreContext provided.");return e},de=(e,t)=>{const r=b(),[n,o]=i.exports.useState(()=>e(r.root));return i.exports.useEffect(()=>r.subscribe(()=>{const s=e(r.root);(t?t(n,s):n!==s)&&o(s)}),[]),n},fe=({children:e})=>{const t=i.exports.useRef(ue()).current;return a(A.Provider,{value:t,children:e})},p=e=>e,me={error:{icon:V,iconStyle:p("errorIcon")},warning:{icon:q,iconStyle:p("warningIcon")},info:{icon:H,iconStyle:p("infoIcon")},success:{icon:U,iconStyle:p("successIcon")}},he=d(e=>({root:{},content:{padding:"1.5rem 1.5rem 0rem 1.5rem",minHeight:"6rem",display:"flex",alignItems:"center"},actions:{padding:"0.5rem 1.5rem 1rem 1.5rem",justifyContent:"center","& > .MuiButton-root":{minWidth:"8rem"}},icon:{flex:"0 0 auto",width:"3rem",height:"3rem"},message:{flex:"1 1",fontSize:"1rem",paddingLeft:"1.5rem",whiteSpace:"pre-wrap"},errorIcon:{color:e.palette.error.main},warningIcon:{color:e.palette.warning.main},infoIcon:{color:e.palette.info.main},successIcon:{color:e.palette.success.main}})),pe=({iconType:e,message:t,onClose:r,okButtonText:n})=>{const o=he(),{icon:s,iconStyle:c}=me[e!=null?e:"info"];return f(v,{className:u("MessageDialog",o.root),open:!0,maxWidth:"sm",fullWidth:!0,onClose:void 0,children:[f(T,{className:o.content,children:[a(s,{className:u(o.icon,o[c])}),a(k,{className:u(o.message),children:t})]}),a(K,{className:o.actions,children:a(x,{ref:l=>l==null?void 0:l.focus(),variant:"outlined",onClick:r,children:n!=null?n:"OK"})})]})},ge=d(e=>({root:{opacity:0}})),xe=({onClose:e,onError:t,showWhile:r})=>{const n=ge();return i.exports.useEffect(()=>{r().then(e).catch(t)},[]),a(v,{className:u("TransparentBlocker",n.root),open:!0,fullScreen:!0})},ye={message:pe,blocker:xe},O=i.exports.createContext(null),$=()=>{const e=i.exports.useContext(O);if(!e)throw new Error("No DialogContext provided.");return e},be=(e,t,r)=>n=>new Promise((o,s)=>{const c=a(e,E(w({},n),{onClose:(...l)=>{const m=t.indexOf(c);m>=0?(t.splice(m,1),r(),o(l)):s("Illegal dialog close.")},onError:s}),G());t.push(c),r()}),Ce=(e,t)=>Object.fromEntries(Object.entries(e).map(([r,n])=>[r,t(n)])),Se=({children:e})=>{const t=i.exports.useRef([]).current,[,r]=i.exports.useReducer(()=>[],[]),[n]=i.exports.useState(()=>Ce(ye,o=>be(o,t,r)));return f(O.Provider,{value:n,children:[e,t.map(o=>o)]})},we=(e,t)=>y(r=>{r.board=N(r.board,e,t)}),Ee=()=>y(e=>{e.board=D()}),Fe=d(e=>({root:{height:"calc(25% - 2px)",width:"calc(25% - 2px)",border:({n:t})=>t===null?"0px":"1px solid grey",margin:"1px",fontSize:"2em",fontWeight:"bold",backgroundColor:t=>t.n!==null?"white":"#ffffff00","&:hover":{backgroundColor:"green",color:"#FFF"}},right:{animation:"$rightAnimation 1s ease"},"@keyframes rightAnimation":{"0%":{transform:"translate(-100%, 0%)"},"100%":{transform:"translate(0%, 0%)"}},left:{animation:"$leftAnimation 1s ease"},"@keyframes leftAnimation":{"0%":{transform:"translate(100%, 0%)"},"100%":{transform:"translate(0%, 0%)"}},down:{animation:"$downAnimation 1s ease"},"@keyframes downAnimation":{"0%":{transform:"translate(0%, -100%)"},"100%":{transform:"translate(0%, 0%)"}},up:{animation:"$upAnimation 1s ease"},"@keyframes upAnimation":{"0%":{transform:"translate(0%, 100%)"},"100%":{transform:"translate(0%, 0%)"}}})),Be=e=>{var C;const{n:t,pos:r}=e,n=Fe(e),o=b(),s=$(),[c,l]=i.exports.useState(r);i.exports.useEffect(()=>{(async()=>{o.root.shuffling?l(r):r!==c&&(await s.blocker({showWhile:async()=>{await new Promise(h=>setTimeout(h,1e3))}}),l(r))})()},[r]);const m=i.exports.useCallback(async()=>{const h=I(o.root.board,r);h!==null&&(o.dispatch(we(r,h)),se(o.root.board)&&(await new Promise(M=>setTimeout(M,1e3)),await s.message({message:"\uFF11\uFF5E\uFF11\uFF15\u306E\u6570\u304C\u63C3\u3044\u307E\u3057\u305F\uFF01"})))},[r]);return a(x,{className:u("SlideButton",n.root,o.root.shuffling?null:(C={[-4]:n.up,[1]:n.right,[4]:n.down,[-1]:n.left}[r-c])!=null?C:null),onClick:m,disabled:t===null||I(o.root.board,r)===null,children:t})},ve=d(e=>({root:{boxSizing:"content-box",padding:0,height:"24rem",width:"24rem",display:"flex",flexWrap:"wrap",border:"4px solid lightgrey",backgroundColor:"grey",backgroundImage:"repeating-linear-gradient(-45deg,#fff, #fff 7px,transparent 0, transparent 14px)"}})),ke=()=>{const e=ve(),t=de(r=>r.board);return a(J,{className:u("BoardPanel",e.root),children:t.map((r,n)=>a(Be,{n:r,pos:n},r!=null?r:0))})},j=e=>y(t=>{t.shuffling=e}),Pe=d(e=>({button:{fontWeight:"bold",marginTop:"2rem"}}));function Ie(){const e=Pe(),t=$(),{dispatch:r}=b(),n=i.exports.useCallback(async()=>{r(j(!0)),r(Ee()),await t.message({iconType:"info",message:"\u30B7\u30E3\u30C3\u30D5\u30EB\u3057\u307E\u3057\u305F"}),r(j(!1))},[]);return a(Q,{maxWidth:"sm",children:f(X,{sx:{my:4},children:[a(k,{variant:"h4",component:"h1",gutterBottom:!0,children:"\uFF11\uFF15\u30D1\u30BA\u30EB\u30B5\u30F3\u30D7\u30EB"}),a(ke,{}),a(x,{className:u("ShuffleButton",e.button),variant:"contained",size:"large",color:"primary",onClick:n,children:"\u30B7\u30E3\u30C3\u30D5\u30EB"})]})})}const Ne=Y({});Z.render(a(ee.StrictMode,{children:f(te,{theme:Ne,children:[a(re,{}),a(oe,{children:a(fe,{children:a(Se,{children:a(Ie,{})})})})]})}),document.getElementById("root"));
